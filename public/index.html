<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>redis</title>
  <link rel="stylesheet" href="./layui/css/layui.css">
  <style>
    .white_content {
    /* display: none; */
    position: absolute;
    top: 25%;
    left: 25%;
    width: 50%;
    padding: 6px 16px;
    border: 12px solid rgb(99, 110, 114);
    background-color: rgb(185, 207, 205);
    z-index:1002;
    overflow: auto;
    }
    .black_overlay {
    /* display: none; */
    position: absolute;
    top: 0%;
    left: 0%;
    width: 100%;
    height: 100%;
    background-color:#70808d;
    z-index:1001;
    -moz-opacity: 0.8;
    opacity:.80;
    filter: alpha(opacity=80);
    }
  </style>
  </head>
  <body>
        <div id="fade" class="black_overlay" v-if="show"></div>
        <div id="light" class="white_content" v-if="show">
                请输入要修改的过期时间(秒)
                <input ref="t_ttl" v-model="ttl" v-on:keyup.enter="ok">
                <button v-on:click="ok">确定</button>
                <button v-on:click="cancel">取消</button>
                </div>
        
  <div class="layui-container layui-col-space10"  style="width: 100%;height: 100%;">
      <div class="layui-row layui-col-space10 layui-row-space10"  style="height: 700px;">
      <div class="layui-col-md3" style="background-color: #2F4056;">
            
          <div id= "naav">
            <ul>
                    <li style="float:left;margin:5px">
                            <a class="layui-btn" v-on:click="showSub = !showSub">更换数据库</a>
                            <dl style="position:absolute;" v-if="showSub">
                                    <dd class="layui-btn layui-bg-black"
                                        v-for="db in dbs"
                                        v-on:click="changeDB(db)">
                                        {{ db }}</dd>
                            </dl>
                    </li>
                    <li style="float:left;margin:5px"><button class="layui-btn" v-on:click="refreshKeys">
                            刷新
                        </button>
                    </li>
                    <li style="float:left;margin:5px;visibility: hidden;"><button class="layui-btn">
                            刷新
                        </button></li>
              </ul>
            </div>
          <div id="key-list">
                <ul>
                  <li
                      is="key-item"
                      v-for="(key, index) in keys"
                      v-bind:key="key.type"
                      v-bind:name="key.name"
                      v-on:remove="remove(key.name)"
                      v-on:get="getKey(key.name)"
                      ></li>
              </ul>
          </div>
      </div>
      <div class="layui-col-md9 layui-bg-green" style="height: 700px;">
          <div class="layui-tab" id="mainTab" lay-filter="tab">
          <ul class="layui-tab-title">
      <li
          is="key-tab"
          v-for="(v,key) in keys"
          v-bind:name="v.name"
          v-bind:size="v.size"
          v-bind:ttl="v.ttl"
          v-on:remove="keys.splice(key,1)"
          v-on:refresh="refresh(v.name)"
          v-on:setttl="setttl(v.name, v.ttl)"
          ></li>
          </ul>
          <div class="layui-tab-content">
      <div
          is="key-info"
          v-for="(key, index) in keys"
          v-bind:context="key.data"
          ></div>
          </div>

      </div>
      </div>

      <div class="layui-col-md9" id="exec" style="width: 70%;">
        <input v-model="cmd"
               style="background-color: #d2d2d2;width: 100%;"
               v-on:keyup.enter="exec"
               placeholder="exec command"
               >
               <textarea id="t_result" style="background-color: #d2d2d2;width: 100%;height: 150px;" v-model="result"
               placeholder="result will show here"
               >
               </textarea>
      </div>
      </div>
  </div>
  <script src="./layui/layui.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="./common.js"></script>
  </body>
  </html>
